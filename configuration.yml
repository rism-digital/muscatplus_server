---
common:
  debug: yes
  context_uri: yes  # if false, displays the full JSON-LD context inline
  secret: EvGw3ND0zB47Sp6Lk8R5M4Bh7PXmwB6x9WJVyYQx8TD72P5kM3ap39bNyEkSWFq1

solr:
  server: "http://localhost:8983/solr/muscatplus_live"

search:
  rows: 20
  page_sizes:
    - 20
    - 40
    - 100
  default_mode: "sources"
  modes:
    sources:
      label: "records.sources"
      record_type: "source"
    people:
      label: "records.people"
      record_type: "person"
    institutions:
      label: "records.institutions"
      record_type: "institution"
    incipits:
      label: "records.incipits"
      record_type: "incipit"
    #    festivals:
    #      label: "records.liturgical_festivals"
    #      record_type: "liturgical_festival"

  facet_definitions:
    # Allowed values for 'type' are:
    #  - range: Creates a range facet over a set of scalar values (e.g., years).
    #  - stats: Creates a read-only facet with some interesting pre-defined stats.
    #  - toggle: Creates a simple on / off facet with a true or false value. Used only on boolean fields.
    #  - select: Creates a facet of values. For these facets, a 'behaviour' query parameter ('fb') sets
    #       the behaviour of 'intersection' or 'union' at query-time More below.
    #
    # Toggle facets have a field, 'active_value', which gives the value of the field when the toggle is switched 'on'.
    #  This is not always intuitive -- if we want to filter out records who have a 'true' value for a given field,
    #  then the 'active_value' must be 'false'. This is made even more confusing by the fact that toggle facets will
    #  only be active when they are given as a query parameter. So to give an example of how a query parameter might:
    #  translate to a Solr query:
    #
    #     ?fq=hide-source-contents:true  --> is_contents_record_b:false
    #     ?fq=hide-source-contents:false -> (no filter on is_contents_record_b, which is the same as is_contents_record_b:true OR false)
    #
    # Select facets take an optional query parameter to control their behaviour. By default,
    #  select facets operate as 'intersection', which is the expected behaviour from a facet;
    #  'union' turns the facet into a multi-value select.
    #
    # Some examples:
    #  ?fq=source-type:foo&fq=source-type:bar  <-- default method, 'intersection'. Only sources of
    #    both type 'foo' and 'bar' are kept.
    #  ?fq=source-type:foo&fq=source-type:bar&bh=source-type:union  <-- 'union'. Shows *all* sources who
    #    have either type 'foo' or type 'bar'.
    #  ?fq=source-type:foo&fq=source-type:bar&bh=source-type:intersection  <-- same as the default method,
    #    but the behaviour is explicitly defined.
    #
    #  Select facets also have a facet sort ('fs') parameter that can control how the facet values are sorted. This
    #  is either 'count' (count desc, most to least) or 'alpha' (alphabetical asc, A-Z).
    #
    #  Select facets can take a 'values' dictionary to provide translations of the values. This
    #  is in the form of 'solr_value: "translation.key"'. If a values field is not provided, then
    #  the facet will display the values as indexed in Solr.
    #
    DATE_RANGE: &DATE_RANGE
      label: "records.dates"
      alias: "date-range"
      type: "range"
      field: "date_ranges_im"
    NUM_HOLDINGS: &NUM_HOLDINGS
      label: "Number of holdings"
      alias: "num-holdings"
      type: "range"
      field: "num_holdings_i"
    HIDE_SOURCE_CONTENTS: &HIDE_SOURCE_CONTENTS
      # Configures whether to show or hide Source Contents records.
      label: "Hide source contents"
      alias: "hide-source-contents"
      type: "toggle"
      field: "is_contents_record_b"
      active_value: false
    HIDE_SOURCE_COLLECTION_RECORDS: &HIDE_SOURCE_COLLECTION_RECORDS
      label: "Hide collection records"
      alias: "hide-source-collections"
      type: "toggle"
      field: "is_collection_record_b"
      active_value: false
    HIDE_SOURCE_COMPOSITE_VOLUMES: &HIDE_SOURCE_COMPOSITE_VOLUMES
      label: "Hide composite volumes"
      alias: "hide-composite-volumes"
      type: "toggle"
      field: "is_composite_volume_b"
      active_value: false
    HAS_DIGITIZATION: &HAS_DIGITIZATION
      label: "Digital images available"
      alias: "has-digitization"
      type: "toggle"
      field: "has_digitization_b"
      active_value: true
    SHOW_SOURCE_INCIPITS: &SHOW_SOURCE_INCIPITS
      label: "Has incipits"
      alias: "has-incipits"
      type: "toggle"
      field: "has_incipits_b"
      active_value: true
    SHOW_SOURCE_ARRANGEMENT: &SHOW_SOURCE_ARRANGEMENT
      label: "records.arrangement"
      alias: "is-arrangement"
      type: "toggle"
      field: "is_arrangement_b"
      active_value: true
    PERSON_ROLE: &PERSON_ROLE
      label: "records.role"
      alias: "person-role"
      type: "select"
      field: "roles_sm"
      default_sort: "count"
    SOURCE_TYPE: &SOURCE_TYPE
      label: "records.source_type"
      alias: "source-type"
      type: "select"
      field: "source_type_s"
      default_sort: "count"
      values:
        manuscript: "records.manuscript"
        printed: "records.printed"
        composite: "records.composite"
    INSTIUTION_CITY: &INSTITUTION_CITY
      label: "records.city"
      alias: "city"
      type: "select"
      field: "city_s"
      default_sort: "alpha"
    SOURCE_HOLDING_INSTITUTION: &SOURCE_HOLDING_INSTITUTION
      label: "Source holding institution"
      alias: "holding-institution"
      type: "select"
      field: "holding_institutions_sm"
      default_sort: "count"
    CONTENT_TYPES: &CONTENT_TYPES
      label: "Content types"
      alias: "content-types"
      type: "select"
      field: "content_types_sm"
      default_sort: "count"
      values:
        musical_source: "records.musical_source"
        libretto: "records.libretto"
        treatise: "records.treatise"
    MATERIAL_GROUP_TYPES: &MATERIAL_GROUP_TYPES
      label: "Material group types"
      alias: "material-group-types"
      type: "select"
      field: "material_group_types_sm"
      default_sort: "count"
    SOURCE_SUBJECTS: &SOURCE_SUBJECTS
      label: "Subjects"
      alias: "subjects"
      type: "select"
      field: "subjects_sm"
      default_sort: "count"

  # Configure the filters to show when a specific type of search is being performed.
  filters:
    sources:
      - *HIDE_SOURCE_CONTENTS
      - *HIDE_SOURCE_COLLECTION_RECORDS
      - *HIDE_SOURCE_COMPOSITE_VOLUMES
      - *HAS_DIGITIZATION
      - *DATE_RANGE
      - *NUM_HOLDINGS
      - *SOURCE_TYPE
      - *CONTENT_TYPES
      - *MATERIAL_GROUP_TYPES
      - *SHOW_SOURCE_INCIPITS
      - *SHOW_SOURCE_ARRANGEMENT
      - *SOURCE_HOLDING_INSTITUTION
      - *SOURCE_SUBJECTS
    people:
      - *DATE_RANGE
      - *PERSON_ROLE
    institutions:
      - *INSTITUTION_CITY
    incipits:
    festivals:
